#!/usr/bin/env node

/**
 * Module dependencies.
 */

var term = require('inquirer');
var join = require('path').join;
var read = require('fs').readFileSync;

// define `templates`
var templates = join(__dirname, '..', 'templates');
var pkg = join(templates, 'package.json');

// define `dir`
var cwd = process.cwd();
var dir = process.argv[2]
  ? cwd + '/' + process.argv[2]
  : cwd;

/**
 * FAQ.
 */

var faq = [];

faq.push({
  type: 'input',
  name: 'name',
  message: 'Project name (keep it short): '
});

faq.push({
  type: 'input',
  name: 'description',
  message: 'Project description: '
});

faq.push({
  type: 'input',
  name: 'homepage',
  message: 'Project homepage: '
});

faq.push({
  type: 'input',
  name: 'author',
  message: 'Your name: '
});

// prompt

console.log('Project setup:');
console.log();
term.prompt(faq, parse);

/**
 * Parse cli `answers`.
 * @param  {Object}
 */

function parse(answers){
  console.log();

  // equip `package.json`
  var file = equip(pkg, answers);
  console.log(file);

  // write file

  // Fin!
  console.log('Done.');
}

/**
 * Equip `package.json` whith project infos.
 * @param  {String}
 * @param  {Object}
 * @return {String}
 */

function equip(f, o){
  var keys = Object.keys(o);
  var pkg = require(f);

  keys.forEach(function(data){
    pkg[data] = o[data];
  });

  return JSON.stringify(pkg, null, 2);
}
